import"../chunks/CWj6FrbW.js";import"../chunks/CkXHWiK0.js";import{a6 as xe,u as ye,a7 as Ve,A as Ee,p as ke,t as g,a as Le,s as l,h as Me,i,c as r,r as s,x as O,l as V,f as Se}from"../chunks/B_07pKug.js";import{l as Te,e as R,s as n}from"../chunks/Ftfd5V-W.js";import{i as U,s as x,a as Fe,b as z}from"../chunks/CO0o1QUp.js";import{e as se,s as re,b as le,v as oe,i as ie,r as G,a as Pe,m as Ae,c as je,d as Ie,p as Be}from"../chunks/maaO3fRk.js";import{t as q,a as p}from"../chunks/CUgi9AwD.js";import{i as Ce}from"../chunks/D4rl45nb.js";function J(e,d,m=d){var E=xe();Te(e,"input",c=>{var u=c?e.defaultValue:e.value;if(u=K(e)?Q(u):u,m(u),E&&u!==(u=d())){var y=e.selectionStart,h=e.selectionEnd;e.value=u??"",h!==null&&(e.selectionStart=y,e.selectionEnd=Math.min(h,e.value.length))}}),(Ee&&e.defaultValue!==e.value||ye(d)==null&&e.value)&&m(K(e)?Q(e.value):e.value),Ve(()=>{var c=d();K(e)&&c===Q(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}function K(e){var d=e.type;return d==="number"||d==="range"}function Q(e){return e===""?null:+e}var De=q('<div class="progress svelte-5mqwq0"><div class="progress-bar svelte-5mqwq0"></div> <div class="progress-text svelte-5mqwq0"> </div></div>'),He=q("<li> </li>"),Ne=q('<div class="errors svelte-5mqwq0"><h3> </h3> <ul></ul></div>'),Oe=q("<div> </div> <!>",1),Re=q('<div class="chapter"><a> </a></div>'),Ue=q(`<div class="main-container svelte-5mqwq0"><div class="loading-container svelte-5mqwq0"><div class="title svelte-5mqwq0">Input</div> <div>These buttons do NOT upload anything to the internet!</div> <div>They only load the files into your browser's memory.</div> <div>Expected folder structure for the episode: <pre class="code svelte-5mqwq0">script.json
img/
  ch-1/
    01.jpg
    ...
voice/
  ch-1/
    01.ogg
    ...</pre></div> <button class="load-button svelte-5mqwq0"> </button> <div>Expected folder structure for the sound files: <pre class="code svelte-5mqwq0">se/
  001.ogg
  ...
bgm/
  001.ogg
  ...</pre></div> <button class="load-button svelte-5mqwq0"> </button> <div>Use this button before loading a new episode.</div> <button class="load-button svelte-5mqwq0">Reset</button> <!> <!></div> <div class="vertical-divider svelte-5mqwq0"></div> <div class="toc-container svelte-5mqwq0"><div class="title svelte-5mqwq0">Table of Contents</div> <!></div> <div class="vertical-divider svelte-5mqwq0"></div> <div class="settings-container svelte-5mqwq0"><div class="title svelte-5mqwq0">Settings</div> <div class="settings-content svelte-5mqwq0"><label for="voice-volume"> </label> <input type="range" id="voice-volume" min="0" max="100"> <label for="se-volume"> </label> <input type="range" id="se-volume" min="0" max="100"> <label for="bgm-volume"> </label> <input type="range" id="bgm-volume" min="0" max="100"></div></div></div>`);function Ze(e,d){ke(d,!1);const[m,E]=Fe(),c=()=>x(Be,"$processFiles",m),u=()=>x(Ae,"$manga",m),y=()=>x(oe,"$voiceVolume",m),h=()=>x(re,"$seVolume",m),W=()=>x(le,"$bgmVolume",m);let k=O(0),f=O(!1),b=O(null);function X(t){const a=document.createElement("input");a.type="file",a.setAttribute("webkitdirectory",""),a.setAttribute("directory",""),a.onchange=async o=>{if(o.target instanceof HTMLInputElement&&o.target.files&&o.target.files.length>0){V(f,!0);try{V(b,await t(o.target.files,v=>{V(k,v)}))}catch(v){console.error("Error processing folder:",v)}finally{V(f,!1)}}},a.click()}function ve(){X((t,a)=>c()(t,!1,a))}function ne(){X((t,a)=>c()(t,!0,a))}Ce();var L=Ue(),M=r(L),w=l(r(M),8),de=r(w,!0);s(w);var $=l(w,4),ce=r($,!0);s($);var S=l($,4),Y=l(S,2);{var ue=t=>{var a=De(),o=r(a),v=l(o,2),_=r(v);s(v),s(a),g(()=>{je(o,`width: ${i(k)??""}%`),n(_,`${i(k)??""}%`)}),p(t,a)};U(Y,t=>{i(f)&&t(ue)})}var me=l(Y,2);{var fe=t=>{var a=Oe(),o=Se(a),v=r(o);s(o);var _=l(o,2);{var B=C=>{var D=Ne(),H=r(D),qe=r(H);s(H);var ae=l(H,2);se(ae,5,()=>i(b).errors,ie,(he,we)=>{var N=He(),$e=r(N,!0);s(N),g(()=>n($e,i(we))),p(he,N)}),s(ae),s(D),g(()=>n(qe,`Errors (${i(b).errors.length??""}):`)),p(C,D)};U(_,C=>{i(b).errors.length>0&&C(B)})}g(()=>n(v,`Processed ${i(b).processed??""} files`)),p(t,a)};U(me,t=>{i(b)!==null&&t(fe)})}s(M);var T=l(M,4),_e=l(r(T),2);se(_e,1,()=>{var t;return((t=u())==null?void 0:t.chapters)??[]},ie,(t,a,o)=>{var v=Re(),_=r(v);Ie(_,"href",`/chapter/${o}`);var B=r(_,!0);s(_),s(v),g(()=>n(B,i(a).title)),p(t,v)}),s(T);var Z=l(T,4),ee=l(r(Z),2),F=r(ee),be=r(F);s(F);var P=l(F,2);G(P);var A=l(P,2),ge=r(A);s(A);var j=l(A,2);G(j);var I=l(j,2),pe=r(I);s(I);var te=l(I,2);G(te),s(ee),s(Z),s(L),g((t,a,o)=>{w.disabled=i(f),n(de,i(f)?"Processing...":"Load episode"),$.disabled=i(f),n(ce,i(f)?"Processing...":"Load sound files"),S.disabled=i(f),n(be,`Voice Volume: ${t??""}`),n(ge,`Sound Effect Volume: ${a??""}`),n(pe,`Background Music Volume: ${o??""}`)},[()=>Math.round(y()),()=>Math.round(h()),()=>Math.round(W())],Me),R("click",w,ve),R("click",$,ne),R("click",S,function(...t){var a;(a=Pe)==null||a.apply(this,t)}),J(P,y,t=>z(oe,t)),J(j,h,t=>z(re,t)),J(te,W,t=>z(le,t)),p(e,L),Le(),E()}export{Ze as component};
